#include "types.h"


const fp32 SIN_TABLE[] = {
    0, 1144, 2287, 3430, 4572, 5712, 6850, 7987, 9121, 10252, 11380, 12505,
    13626, 14742, 15855, 16962, 18064, 19161, 20252, 21336, 22415, 23486, 24550,
    25607, 26656, 27697, 28729, 29753, 30767, 31772, 32768, 33754, 34729, 35693,
    36647, 37590, 38521, 39441, 40348, 41243, 42126, 42995, 43852, 44695, 45525,
    46341, 47143, 47930, 48703, 49461, 50203, 50931, 51643, 52339, 53020, 53684,
    54332, 54963, 55578, 56175, 56756, 57319, 57865, 58393, 58903, 59396, 59870,
    60326, 60764, 61183, 61584, 61966, 62328, 62672, 62997, 63303, 63589, 63856,
    64104, 64332, 64540, 64729, 64898, 65048, 65177, 65287, 65376, 65446, 65496,
    65526,
};

fp32 fp_mul(const fp32 a, const fp32 b) {
    return (a * b) >> 16;
}

fp32 fp_sin(const u32 degrees) {
    u32 degree = degrees % 360;
    if (0 <= degree && degree < 90) {
        return SIN_TABLE[degree];
    } else if (90 <= degree && degree < 180) {
        return SIN_TABLE[180 - degree];
    } else if (180 <= degree && degree < 270) {
        return -SIN_TABLE[degree - 180];
    } else {
        return -SIN_TABLE[360 - degree];
    }
}

fp32 fp_cos(const u32 degrees) {
    return fp_sin(degrees - 90);
}

